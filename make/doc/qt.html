<HTML>
<HEAD>
<TITLE> Rules for Interfacing QT </TITLE>
</HEAD>
<BODY BGCOLOR=white>

<H1> Rules for interfacing <A HREF="http://www.troll.no/">QT </H1>

Let us assume the basic structure of working with QT objects:
an header file, an C++ source code file and a meta-object file
which is generated by the QT meta-object-compiler from the
header file. The meta-object file (extension .moc) is included
by the C++ source code file. This is a short example of this
structure.<P>

<TT><B>Object.h</B></TT>
<TABLE><TR><TD BGCOLOR=#C0C0C0>
<PRE>
#include <qwidget.h>

class	myQWidget : public QWidget
{
	Q_OBJECT

public:	myQWidget(QWidget*parent);

};

</PRE>
</TD></TR></TABLE>
<P>
<TT><B>Object.cpp</B></TT>
<TABLE><TR><TD BGCOLOR=#C0C0C0>
<PRE>
#include "Object.h"
#include "Object.moc"

myQWidget::myQWidget(QWidget*parent)
: QWidget(parent)
{}

</PRE>
</TD></TR></TABLE>
<P>
The make rules have to create a meta-object file from the header 
before the C++ source file can be compiled. To enable this
functionality, follow the path sketched here.
<P>
The QTDIR variable needs to be set for qt make rules to work:<BR>
<TT><B>GNUmakefile</B></TT>, section of <TT><B>GNUmakefile.rules</B></TT>,
environment or make command line:
<TABLE><TR><TD BGCOLOR=#C0C0C0>
<PRE>
QTDIR=/usr/local/qt
</PRE>
</TD></TR></TABLE>

<P>
The <TT>qt.rules</TT> must be included in
<TT><B>GNUmakefile</B></TT> or in a section of <TT><B>GNUmakefile.rules</B></TT>
<TABLE><TR><TD BGCOLOR=#C0C0C0>
<PRE>
include ${MAKE_ROOT}/make/qt.rules
</PRE>
</TD></TR></TABLE>
<P>
Add a target for all meta-object files to the
<TT><B>GNUmakefile</B></TT>:
<TABLE><TR><TD BGCOLOR=#C0C0C0>
<PRE>
moc: Object.moc

Object.cpp: Object.moc
</PRE>
</TD></TR></TABLE>
(add an arbitrary number of objects here).
<P>
It has then to be assured that the meta object files are
made before compilation.
If the application <A HREF="GNUmakefile.rules.html">GNUmakefile.rules</A>
supports an default <A HREF="rules.html#cdtor">target constructor</A>,
then the moc dependency can simply be specified before including the
<TT>GNUmakefile.rules</TT> file:
<TABLE><TR><TD BGCOLOR=#C0C0C0>
<PRE>
...

all.ctor = moc

include $(VPATH)../GNUmakefile.rules

...

</PRE>
</TD></TR></TABLE>


</BODY>
</HTML>

